
            <div class="results-box"><h3>ðŸ“Œ Attributable Fraction in Exposed & 95% CI</h3><p><strong>AFE:</strong> <span id="afe-result"></span>%</p><p><strong>95% CI for AFE:</strong> <span id="afe-ci"></span>%</p></div>
            <div class="results-box"><h3>ðŸ“Œ Population Attributable Fraction & 95% CI</h3><p><strong>PAF:</strong> <span id="paf-result"></span>%</p><p><strong>95% CI for PAF:</strong> <span id="paf-ci"></span>%</p></div>
        </div>
    </div>
<script>
    function calculateResults() {
        let a = parseFloat(document.getElementById("a").value);
        let b = parseFloat(document.getElementById("b").value);
        let c = parseFloat(document.getElementById("c").value);
        let d = parseFloat(document.getElementById("d").value);

        if (!a || !b || !c || !d) {
            alert("Please enter valid numbers.");
            return;
        }
        
        let prevExposed = a / (a + b);
        let prevUnexposed = c / (c + d);
        let prevalenceRatio = prevExposed / prevUnexposed;
        let prevalenceDifference = prevExposed - prevUnexposed;

        let lnPR = Math.log(prevalenceRatio);
        let standardErrorPR = Math.sqrt(1 / a + 1 / b + 1 / c + 1 / d);
        let lowerPR = Math.exp(lnPR - 1.96 * standardErrorPR);
        let upperPR = Math.exp(lnPR + 1.96 * standardErrorPR);

        let standardErrorPD = Math.sqrt((a / ((a + b) ** 2)) + (c / ((c + d) ** 2)));
        let lowerPD = prevalenceDifference - 1.96 * standardErrorPD;
        let upperPD = prevalenceDifference + 1.96 * standardErrorPD;

        let attributableFractionExposed = ((prevalenceRatio - 1) / prevalenceRatio) * 100;
        let lowerAFE = ((lowerPR - 1) / lowerPR) * 100;
        let upperAFE = ((upperPR - 1) / upperPR) * 100;

        let p_e = (a + c) / (a + b + c + d);
        let populationAttributableFraction = (p_e * (prevalenceRatio - 1)) / (1 + p_e * (prevalenceRatio - 1)) * 100;

        let lnOneMinusPAF = Math.log(1 - populationAttributableFraction / 100);
        let standardErrorPAF = Math.sqrt((a / (c * (a + c))) + (b / (d * (b + d))));
        let lowerPAF = 1 - Math.exp(lnOneMinusPAF + 1.96 * standardErrorPAF);
        let upperPAF = 1 - Math.exp(lnOneMinusPAF - 1.96 * standardErrorPAF);

        populationAttributableFraction = populationAttributableFraction.toFixed(3);
        lowerPAF = (lowerPAF * 100).toFixed(3);
        upperPAF = (upperPAF * 100).toFixed(3);

        document.getElementById("pr-result").innerText = prevalenceRatio.toFixed(3);
        document.getElementById("pr-ci").innerText = `(${lowerPR.toFixed(3)} â€“ ${upperPR.toFixed(3)})`;
        
        
        document.getElementById("afe-result").innerText = attributableFractionExposed.toFixed(3);
        document.getElementById("afe-ci").innerText = `($1 â€“ $2)%`;
        document.getElementById("paf-result").innerText = populationAttributableFraction + "%";
        document.getElementById("paf-ci").innerText = `(${lowerPAF}% â€“ ${upperPAF}%)`;
        
        document.getElementById("results-container").style.display = "block";
    }
</script>
</body>
</html>
